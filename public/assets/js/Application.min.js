!function e(n,o,t){function r(s,c){if(!o[s]){if(!n[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=o[s]={exports:{}};n[s][0].call(l.exports,function(e){var o=n[s][1][e];return r(o?o:e)},l,l.exports,e,n,o,t)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<t.length;s++)r(t[s]);return r}({1:[function(e,n,o){n.exports=function(e){e.controller("AdminController",["$scope","$location","$window","OrganisationService","AdminFactory",function(e,n,o,t,r){var i=[];t.getOrganisations().success(function(e,n,o,t){i=e}).error(function(e,n,o,t){console.log(n),console.log(e),console.log(o),console.log(t)}),e.allGroups=i}])}},{}],2:[function(e,n,o){n.exports=function(e){e.controller("NavigationBarController",["$scope",function(e){e.toggle=function(){angular.element(document.getElementById("wrapper")).toggleClass("unfolded")}}])}},{}],3:[function(e,n,o){n.exports=function(n){e("./AdminController.js")(n),e("./NavigationBarController.js")(n)}},{"./AdminController.js":1,"./NavigationBarController.js":2}],4:[function(e,n,o){n.exports=function(e){}},{}],5:[function(e,n,o){n.exports=function(e){e.factory("AdminFactory",function(){var e={};return e})}},{}],6:[function(e,n,o){n.exports=function(n){e("./AdminFactory.js")(n)}},{"./AdminFactory.js":5}],7:[function(e,n,o){n.exports=function(n){var o=angular.module("app.adminFunctions",["app.api"]);return e("./Controllers/_index.js")(o),e("./Services/_index.js")(o),e("./Directives/_index.js")(o),o}},{"./Controllers/_index.js":3,"./Directives/_index.js":4,"./Services/_index.js":6}],8:[function(e,n,o){"use strict";n.exports=function(e){e.constant("API",{url:"http://merijncelie.nl:3000/api",key:"EP3qxDM91vOA4FC3i0ERa7SE72le8L32",clientId:"WebV1",clientSecret:"Web123456"}),e.factory("TestService",function(){return{}}),e.factory("UserService",function(e,n){return{login:function(o,t){return e.post(n.url+"/oauth/token",{username:o,password:t,grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret})},getUserInfo:function(){return e.get(n.url+"/users/@me")},updateUser:function(o){return e.put(n.url+"/users/"+o._id,{email:o.emai,firstName:o.firstName,middleName:o.middleName,surName:o.surName,street:o.street,houseNumber:o.houseNumber,city:o.city,zipCode:o.zipCode,phone1:o.phone1,phone2:o.phone2})},sentPasswordReset:function(o){return e.post(n.url+"users/forgot",{email:o.email})},changePassword:function(o){return e.post(n.url+"users/"+user._id,{password:o})}}}),e.factory("OrganisationService",function(e,n){return{getOrganisations:function(){return e.get(n.url+"/groups/"+sessionStorage.access_token,{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer"+sessionStorage.access_token}})}}})}},{}],9:[function(e,n,o){n.exports=function(n){var o=angular.module("app.api",[]);return e("./Api.js")(o),o}},{"./Api.js":8}],10:[function(e,n,o){var t=["ngRoute","door3.css","app.api","app.authentication","app.user","app.moderator","app.adminFunctions","app.canvas"],r=angular.module("app",t);r.config(function(e){e.interceptors.push("TokenInterceptor")}).config(function(e){e.startSymbol("[["),e.endSymbol("]]")});e("./Authentication/_index")(r),e("./Api/_index")(r),e("./User/_index")(r),e("./Admin/_index")(r),e("./Moderator/_index")(r),e("./Canvas/_index")(r);r.config(["$locationProvider","$routeProvider",function(e,n){n.when("/auth/login",{templateUrl:"partials/login.html",controller:"AuthenticationController"}).when("/profile",{templateUrl:"partials/user/profile.html",controller:"UserController"}).when("/profile/password",{templateUrl:"partials/user/password.html",controller:"UserController"}).when("/moderator",{templateUrl:"partials/moderator_dash.html",controller:"ModeratorController"}).when("/admin",{templateUrl:"partials/admin_dash.html",controller:"AdminController"}).when("/canvas",{templateUrl:"partials/canvas/spiral.html",controller:"CanvasController",css:[{href:1==debug?"dev/css/canvas.css":"assets/css/canvas.css"}]}).otherwise({redirectTo:"/"})}]),r.run(function(e,n,o,t){e.$on("$routeChangeStart",function(e,r,i){null==r||null==r.access||!r.access.requiredAuthentication||t.isAuthenticated||o.sessionStorage.token||n.path("/auth/login")})})},{"./Admin/_index":7,"./Api/_index":9,"./Authentication/_index":15,"./Canvas/_index":18,"./Moderator/_index":23,"./User/_index":28}],11:[function(e,n,o){n.exports=function(e){e.controller("AuthenticationController",["$scope","$location","$window","UserService","AuthenticationService",function(e,n,o,t,r){e.signIn=function(e,i){null!=e&&null!=i&&t.login(e,i).success(function(e){r.isAuthenticated=!0,o.sessionStorage.access_token=e.access_token,o.sessionStorage.refresh_token=e.refresh_token,n.path("/canvas")}).error(function(e,n){console.log(e),console.log(n)})}}])}},{}],12:[function(e,n,o){n.exports=function(n){e("./AuthenticationController.js")(n)}},{"./AuthenticationController.js":11}],13:[function(e,n,o){n.exports=function(e){e.factory("AuthenticationService",function(){var e={isAuthenticated:!1,isAdmin:!1};return e}),e.factory("TokenInterceptor",["$q","$window","$location","API","AuthenticationService",function(e,n,o,t,r){return{request:function(e){return e.headers=e.headers||{},n.sessionStorage.refresh_token&&(e.headers.Authorization="Bearer "+n.sessionStorage.access_token,r.isAuthenticated=!0),e.headers["x-key"]=t.key,e},requestError:function(n){return e.reject(n)},response:function(o){return null!=o&&200==o.status&&n.sessionStorage.token&&!r.isAuthenticated&&(r.isAuthenticated=!0),o||e.when(o)},responseError:function(t){return null!=t&&401===t.status&&(n.sessionStorage.token||r.isAuthenticated)&&(delete n.sessionStorage.token,r.isAuthenticated=!1,o.path("/login")),e.reject(t)}}}])}},{}],14:[function(e,n,o){n.exports=function(n){e("./Authentication.js")(n)}},{"./Authentication.js":13}],15:[function(e,n,o){n.exports=function(n){var o=angular.module("app.authentication",["app.api"]);return e("./Controllers/_index.js")(o),e("./Services/_index.js")(o),o}},{"./Controllers/_index.js":12,"./Services/_index.js":14}],16:[function(e,n,o){n.exports=function(e){e.controller("CanvasController",["$scope","$css",function(e,n){n.bind({href:"test.css"},e),e.test=function(){console.log("test")}}])}},{}],17:[function(e,n,o){n.exports=function(n){e("./CanvasController.js")(n)}},{"./CanvasController.js":16}],18:[function(e,n,o){n.exports=function(n){var o=angular.module("app.canvas",["app.api"]);return e("./Controllers/_index.js")(o),o}},{"./Controllers/_index.js":17}],19:[function(e,n,o){n.exports=function(e){e.controller("ModeratorController",["$scope","$location","$window","ModeratorFactory",function(e,n,o,t){e.groups=t.groups,e.addGroup=function(e){return t.addGroup(e)}}])}},{}],20:[function(e,n,o){n.exports=function(n){e("./ModeratorController.js")(n)}},{"./ModeratorController.js":19}],21:[function(e,n,o){n.exports=function(e){e.factory("ModeratorFactory",function(){var e={};return e.groups=[{name:"test1"},{name:"test2"}],e.addGroup=function(n){e.groups.push({name:n})},e})}},{}],22:[function(e,n,o){n.exports=function(n){e("./ModeratorFactory.js")(n)}},{"./ModeratorFactory.js":21}],23:[function(e,n,o){n.exports=function(n){var o=angular.module("app.moderator",["app.api"]);return e("./Controllers/_index.js")(o),e("./Services/_index.js")(o),o}},{"./Controllers/_index.js":20,"./Services/_index.js":22}],24:[function(e,n,o){n.exports=function(e){e.controller("UserController",["$scope","$location","$window","UserFactory","UserService","AuthenticationService",function(e,n,o,t,r,i){function s(){e.editmode=!1}function c(){i.isAuthenticated?r.getUserInfo().success(function(n){e.user=n[0]}).error(function(e,n){console.log(e),console.log(n)}):console.log("not authenticated")}e.editmode=!1,e.user={},c(),e.switchToEditmode=function(){e.editmode=!0},e.updateUserInfo=function(){i.isAuthenticated?r.updateUser(e.user).success(function(e){s()}).error(function(e,n){console.log(e),console.log(n)}):console.log("not authenticated")},e.changePassword=function(e){null!=e&&null!=e.old&&null!=e["new"]&&null!=e.repeat?(console.log("old: "+e.old),console.log("new: "+e["new"]),console.log("repeat: "+e.repeat),e["new"]==e.repeat||alert("nieuw wachtwoord komt niet overeen")):alert("vul alsjeblieft alle velden in")}}])}},{}],25:[function(e,n,o){n.exports=function(n){e("./UserController.js")(n)}},{"./UserController.js":24}],26:[function(e,n,o){n.exports=function(e){e.factory("UserFactory",["UserService","AuthenticationService",function(e,n){var o={};return o.user={},o.getUser=function(){return console.log("get user"),o.user},o.fillUser=function(){o.user={username:"JoepTest",hashedPassword:"3872822418e1325c97520b1e65aae2137359a2a8",salt:"U3WCVzqIyNLgADHRScp8ncbWMQDgNSbj+dl9ITauhPw=",email:"jjc.vandenbroek@student.avans.nl",firstName:"Joep",middleName:"van den",surName:"Broek",street:"leijzoom",houseNumber:"4",city:"Goirle",_id:"553e5c609f8bdebe785299a7",__v:0,roles:[],organization:[],created:"2015-04-27T15:57:20.123Z"}},o.getUserInfo=function(){n.isAuthenticated?e.getUserInfo().success(function(e){return o.user=e[0],e[0]}).error(function(e,n){console.log(e),console.log(n)}):console.log("not authenticated")},o.updateUserInfo=function(){},o}])}},{}],27:[function(e,n,o){n.exports=function(n){e("./UserService.js")(n)}},{"./UserService.js":26}],28:[function(e,n,o){n.exports=function(n){var o=angular.module("app.user",["app.api"]);return e("./Controllers/_index.js")(o),e("./Services/_index.js")(o),o}},{"./Controllers/_index.js":25,"./Services/_index.js":27}]},{},[10]);