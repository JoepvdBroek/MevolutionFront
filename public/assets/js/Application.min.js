!function e(n,t,r){function o(s,a){if(!t[s]){if(!n[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[s]={exports:{}};n[s][0].call(l.exports,function(e){var t=n[s][1][e];return o(t?t:e)},l,l.exports,e,n,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,t){n.exports=function(e){e.controller("AdminController",["$scope","$location","$window","$routeParams","OrganisationService","GroupService","UserGroupService","AdminFactory",function(e,n,t,r,o,s,a,c){var u=[];o.getOrganisations().then(function(e,n,t,r){for(i=0;i<e.length;i++)u.push(e[i])}),e.allOrganisations=u,e.addOrganisation=function(n,t,r){o.postOrganisation(n,t,r).success(function(n,t,r,s){e.allOrganisations=[],o.getOrganisations().then(function(n,t,r,o){for(i=0;i<n.length;i++)e.allOrganisations.push(n[i])}),e.newGroupName="",e.newGroupColor="",e.newGroupLogo=""}).error(function(e,n,t,r){})},e.submitNewOrganisationName=function(e,n){o.postNewOrganisationName(e,n._id).then(function(e,n,t,r){})};var l=[];e.allModerators=[],s.getGroups(r.organisationid).then(function(e,n,t,r){for(i=0;i<e.length;i++)l.push(e[i])}),e.allGroups=l,e.addGroup=function(n){s.postGroup(n,r.organisationid).success(function(n,t,o,a){e.allGroups=[],s.getGroups(r.organisationid).then(function(n,t,r,o){for(i=0;i<n.length;i++)e.allGroups.push(n[i])}),e.newGroupName=""}).error(function(e,n,t,r){})},s.getAllModeratorsOfOrganisation(r.organisationid).then(function(n,t,r,o){for(i=0;i<n.length;i++)e.allModerators.push(n[i])}),e.selectionOfModerators=[],e.toggleSelectionOfModerators=function(n){var t=e.selectionOfUsers.indexOf(n);t>-1?e.selectionOfModerators.splice(t,1):e.selectionOfModerators.push(n),console.log(e.selectionOfModerators)},e.submitNewGroupName=function(n,t){console.log(e.selectionOfModerators),a.pushNewGroupName(t._id,n,e.selectionOfModerators).then(function(e,n,t,r){})};var p=[],d=[],f="";a.getGroup(r.groupid).then(function(e,n,t,r){for(i=0;i<e[0].participants.length;i++)p.push(e[0].participants[i]);for(i=0;i<e[0].moderators.length;i++)d.push(e[0].moderators[i]);f=e[0].title}),e.usersOfGroup=p,e.moderatorsOfGroup=d,e.groupTitle=f;var g=[];a.getAllUsers().then(function(e,n,t,r){for(i=0;i<e.length;i++)g.push(e[i])}),e.allMevolutionUsers=g,e.submitUsers=function(){a.pushUsersToGroup(r.groupid,e.selectionOfUsers).then(function(n,t,o,s){a.getGroup(r.groupid).then(function(n,t,r,o){for(e.usersOfGroup=[],i=0;i<n[0].participants.length;i++)e.usersOfGroup.push(n[0].participants[i]);console.log(e.usersOfGroup)})})},e.selectionOfUsers=[],e.toggleSelection=function(n){var t=e.selectionOfUsers.indexOf(n);t>-1?e.selectionOfUsers.splice(t,1):e.selectionOfUsers.push(n)}}])}},{}],2:[function(e,n,t){n.exports=function(e){e.controller("NavigationBarController",["$scope",function(e){e.toggle=function(){angular.element(document.getElementById("wrapper")).toggleClass("unfolded")}}])}},{}],3:[function(e,n,t){n.exports=function(n){e("./AdminController.js")(n),e("./NavigationBarController.js")(n)}},{"./AdminController.js":1,"./NavigationBarController.js":2}],4:[function(e,n,t){n.exports=function(e){e.factory("AdminFactory",function(){var e={};return e.organisations=[{name:"test1"},{name:"test2"}],e.addOrganisation=function(n){e.organisations.push({name:n})},e})}},{}],5:[function(e,n,t){n.exports=function(n){e("./AdminFactory.js")(n)}},{"./AdminFactory.js":4}],6:[function(e,n,t){n.exports=function(n){var t=angular.module("app.adminFunctions",["app.api"]);return e("./Controllers/_index.js")(t),e("./Services/_index.js")(t),t}},{"./Controllers/_index.js":3,"./Services/_index.js":5}],7:[function(e,n,t){"use strict";n.exports=function(e){e.constant("API",{url:"http://merijncelie.nl:3000/api",key:"EP3qxDM91vOA4FC3i0ERa7SE72le8L32",clientId:"WebV1",clientSecret:"Web123456"}),e.factory("UserService",function(e,n){return{login:function(t,r){return e.post(n.url+"/oauth/token",{username:t,password:r,grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret})}}}),e.factory("OrganisationService",function(e,n){return{getOrganisations:function(){return e.get(n.url+"/organization",{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}}).then(function(e){return e.data})},postOrganisation:function(t,r,o){return e.post(n.url+"/organization",{name:t,color:r,logo:o},{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}})},postNewOrganisationName:function(t,r){return e.put(n.url+"/organization/"+r,{name:t},{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}})}}}),e.factory("GroupService",function(e,n){return{getGroups:function(t){return e.get(n.url+"/groups?organization="+t,{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}}).then(function(e){return e.data})},postGroup:function(t,r){return e.post(n.url+"/groups",{title:t,organization:r},{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}})},getAllModeratorsOfOrganisation:function(t){return e.get(n.url+"/organization/moderators/"+t,{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}}).then(function(e){return e.data})}}}),e.factory("UserGroupService",function(e,n){return{getGroup:function(t){return e.get(n.url+"/groups/"+t,{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}}).then(function(e){return e.data})},getAllUsers:function(){return e.get(n.url+"/users",{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}}).then(function(e){return e.data})},pushUsersToGroup:function(t,r){return e.put(n.url+"/groups/"+t,{participants:r},{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}})},pushNewGroupName:function(t,r,o){return e.put(n.url+"/groups/"+t,{title:r,moderators:o},{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}})}}}),e.factory("TimelineService",function(e,n){return{getCanvases:function(){return e.get(n.url+"/canvas",{username:"terry",password:"terry",grant_type:"password",client_id:n.clientId,client_secret:n.clientSecret,headers:{Authorization:"Bearer "+sessionStorage.access_token}}).then(function(e){return e.data})}}}),e.factory("CanvasService",function(e,n){return{getCanvas:function(t){return e.get(n.url+"/canvas/"+t,{})}}})}},{}],8:[function(e,n,t){n.exports=function(n){var t=angular.module("app.api",[]);return e("./Api.js")(t),t}},{"./Api.js":7}],9:[function(e,n,t){var r=["ngRoute","door3.css","app.api","app.authentication","app.moderator","app.adminFunctions","app.canvas"],o=angular.module("app",r);o.config(function(e){e.interceptors.push("TokenInterceptor")});e("./Authentication/_index")(o),e("./Api/_index")(o),e("./Admin/_index")(o),e("./Moderator/_index")(o),e("./Canvas/_index")(o);o.config(["$locationProvider","$routeProvider",function(e,n){n.when("/auth/login",{templateUrl:"partials/login.html",controller:"AuthenticationController"}).when("/moderator",{templateUrl:"partials/moderator_dash.html",controller:"ModeratorController"}).when("/admin",{templateUrl:"partials/admin_dash.html",controller:"AdminController"}).when("/canvas",{templateUrl:"/partials/canvas/canvas.html",controller:"CanvasController",css:[{href:1==debug?"/dev/css/canvas.css":"/assets/css/canvas.css",bustCache:!0}]}).when("/admin/groups/:organisationid",{templateUrl:"partials/admin_dash_groups.html",controller:"AdminController"}).when("/admin/users/:groupid",{templateUrl:"partials/admin_dash_users.html",controller:"AdminController"}).otherwise({redirectTo:"/"})}]),o.run(function(e,n,t,r){e.$on("$routeChangeStart",function(e,o,i){null==o||null==o.access||!o.access.requiredAuthentication||r.isAuthenticated||t.sessionStorage.token||n.path("/auth/login")})})},{"./Admin/_index":6,"./Api/_index":8,"./Authentication/_index":14,"./Canvas/_index":21,"./Moderator/_index":26}],10:[function(e,n,t){n.exports=function(e){e.controller("AuthenticationController",["$scope","$location","$window","UserService","AuthenticationService",function(e,n,t,r,o){e.signIn=function(e,i){null!=e&&null!=i&&r.login(e,i).success(function(e){o.isAuthenticated=!0,t.sessionStorage.access_token=e.access_token,t.sessionStorage.refresh_token=e.refresh_token,n.path("/canvas")}).error(function(e,n){console.log(e),console.log(n)})}}])}},{}],11:[function(e,n,t){n.exports=function(n){e("./AuthenticationController.js")(n)}},{"./AuthenticationController.js":10}],12:[function(e,n,t){n.exports=function(e){e.factory("AuthenticationService",function(){var e={isAuthenticated:!1,isAdmin:!1};return e}),e.factory("TokenInterceptor",["$q","$window","$location","API","AuthenticationService",function(e,n,t,r,o){return{request:function(e){return e.headers=e.headers||{},n.sessionStorage.access_token&&(e.headers.Authorization="Bearer "+n.sessionStorage.access_token),e.headers["x-key"]=r.key,e},requestError:function(n){return e.reject(n)},response:function(t){return null!=t&&200==t.status&&n.sessionStorage.token&&!o.isAuthenticated&&(o.isAuthenticated=!0),t||e.when(t)},responseError:function(r){return null!=r&&401===r.status&&(n.sessionStorage.token||o.isAuthenticated)&&(delete n.sessionStorage.token,o.isAuthenticated=!1,t.path("/login")),e.reject(r)}}}])}},{}],13:[function(e,n,t){n.exports=function(n){e("./Authentication.js")(n)}},{"./Authentication.js":12}],14:[function(e,n,t){n.exports=function(n){var t=angular.module("app.authentication",["app.api"]);return e("./Controllers/_index.js")(t),e("./Services/_index.js")(t),t}},{"./Controllers/_index.js":11,"./Services/_index.js":13}],15:[function(e,n,t){n.exports=function(e){e.controller("CanvasController",["$scope","$css","$sce","CanvasService",function(e,n,t,r){e.fases=[],r.getCanvas("553f9914c757d2c505273250").success(function(n){e.fases=n.fases}),e.trustSrc=function(e){return t.trustAsResourceUrl(e)}}])}},{}],16:[function(e,n,t){n.exports=function(n){e("./CanvasController.js")(n)}},{"./CanvasController.js":15}],17:[function(e,n,t){n.exports=function(e){e.directive("colorbox",function(e){return{restrict:"AC",link:function(n,t,r){t.click("bind",function(t){t.preventDefault();$.colorbox({href:r.colorbox,onComplete:function(){var t=n.$parent;t.$apply(function(){var n=$("#cboxLoadedContent");e(n)(t),setTimeout(function(){$("#video"+t.object.object._id)[0].load()},1)})}})})}}})}},{}],18:[function(e,n,t){n.exports=function(n){e("./Colorbox.js")(n)}},{"./Colorbox.js":17}],19:[function(e,n,t){n.exports=function(e){}},{}],20:[function(e,n,t){n.exports=function(n){e("./Canvas.js")(n)}},{"./Canvas.js":19}],21:[function(e,n,t){n.exports=function(n){var t=angular.module("app.canvas",["app.api"]);return e("./Controllers/_index.js")(t),e("./Services/_index.js")(t),e("./Directives/_index.js")(t),t}},{"./Controllers/_index.js":16,"./Directives/_index.js":18,"./Services/_index.js":20}],22:[function(e,n,t){n.exports=function(e){e.controller("ModeratorController",["$scope","$location","$window","ModeratorFactory",function(e,n,t,r){e.groups=r.groups,e.addGroup=function(e){return r.addGroup(e)}}])}},{}],23:[function(e,n,t){n.exports=function(n){e("./ModeratorController.js")(n)}},{"./ModeratorController.js":22}],24:[function(e,n,t){n.exports=function(e){e.factory("ModeratorFactory",function(){var e={};return e.groups=[{name:"test1"},{name:"test2"}],e.addGroup=function(n){e.groups.push({name:n})},e})}},{}],25:[function(e,n,t){n.exports=function(n){e("./ModeratorFactory.js")(n)}},{"./ModeratorFactory.js":24}],26:[function(e,n,t){n.exports=function(n){var t=angular.module("app.moderator",["app.api"]);return e("./Controllers/_index.js")(t),e("./Services/_index.js")(t),t}},{"./Controllers/_index.js":23,"./Services/_index.js":25}]},{},[9]);