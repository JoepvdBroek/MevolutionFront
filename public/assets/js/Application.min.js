!function n(t,e,o){function r(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(n){var e=t[s][1][n];return r(e?e:n)},l,l.exports,n,t,e,o)}return e[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(n,t,e){t.exports=function(n){n.controller("AdminController",["$scope","$location","$window","OrganisationService","AdminFactory",function(n,t,e,o,r){var i=[];o.getOrganisations().success(function(n,t,e,o){i=n}).error(function(n,t,e,o){console.log(t),console.log(n),console.log(e),console.log(o)}),n.allGroups=i}])}},{}],2:[function(n,t,e){t.exports=function(n){n.controller("NavigationBarController",["$scope",function(n){n.toggle=function(){angular.element(document.getElementById("wrapper")).toggleClass("unfolded")}}])}},{}],3:[function(n,t,e){t.exports=function(t){n("./AdminController.js")(t),n("./NavigationBarController.js")(t)}},{"./AdminController.js":1,"./NavigationBarController.js":2}],4:[function(n,t,e){t.exports=function(n){}},{}],5:[function(n,t,e){t.exports=function(n){n.factory("AdminFactory",function(){var n={};return n})}},{}],6:[function(n,t,e){t.exports=function(t){n("./AdminFactory.js")(t)}},{"./AdminFactory.js":5}],7:[function(n,t,e){t.exports=function(t){var e=angular.module("app.adminFunctions",["app.api"]);return n("./Controllers/_index.js")(e),n("./Services/_index.js")(e),n("./Directives/_index.js")(e),e}},{"./Controllers/_index.js":3,"./Directives/_index.js":4,"./Services/_index.js":6}],8:[function(n,t,e){"use strict";t.exports=function(n){n.constant("API",{url:"http://merijncelie.nl:3000/api",key:"EP3qxDM91vOA4FC3i0ERa7SE72le8L32",clientId:"WebV1",clientSecret:"Web123456"}),n.factory("TestService",function(){return{}}),n.factory("UserService",function(n,t){return{login:function(e,o){return n.post(t.url+"/oauth/token",{username:e,password:o,grant_type:"password",client_id:t.clientId,client_secret:t.clientSecret})}}}),n.factory("OrganisationService",function(n,t){return{getOrganisations:function(){return n.get(t.url+"/groups/"+sessionStorage.access_token,{username:"terry",password:"terry",grant_type:"password",client_id:t.clientId,client_secret:t.clientSecret,headers:{Authorization:"Bearer"+sessionStorage.access_token}})}}})}},{}],9:[function(n,t,e){t.exports=function(t){var e=angular.module("app.api",[]);return n("./Api.js")(e),e}},{"./Api.js":8}],10:[function(n,t,e){var o=["ngRoute","door3.css","app.api","app.authentication","app.moderator","app.adminFunctions","app.canvas"],r=angular.module("app",o);r.config(function(n){n.interceptors.push("TokenInterceptor")}).config(function(n){n.startSymbol("[["),n.endSymbol("]]")});n("./Authentication/_index")(r),n("./Api/_index")(r),n("./Admin/_index")(r),n("./Moderator/_index")(r),n("./Canvas/_index")(r);r.config(["$locationProvider","$routeProvider",function(n,t){t.when("/auth/login",{templateUrl:"partials/login.html",controller:"AuthenticationController"}).when("/moderator",{templateUrl:"partials/moderator_dash.html",controller:"ModeratorController"}).when("/admin",{templateUrl:"partials/admin_dash.html",controller:"AdminController"}).when("/canvas",{templateUrl:"/partials/canvas/spiral.html",controller:"CanvasController",css:[{href:1==debug?"/dev/css/canvas.css":"/assets/css/canvas.css"}]}).otherwise({redirectTo:"/"})}]),r.run(function(n,t,e,o){n.$on("$routeChangeStart",function(n,r,i){null==r||null==r.access||!r.access.requiredAuthentication||o.isAuthenticated||e.sessionStorage.token||t.path("/auth/login")})})},{"./Admin/_index":7,"./Api/_index":9,"./Authentication/_index":15,"./Canvas/_index":18,"./Moderator/_index":23}],11:[function(n,t,e){t.exports=function(n){n.controller("AuthenticationController",["$scope","$location","$window","UserService","AuthenticationService",function(n,t,e,o,r){n.signIn=function(n,i){null!=n&&null!=i&&o.login(n,i).success(function(n){r.isAuthenticated=!0,e.sessionStorage.access_token=n.access_token,e.sessionStorage.refresh_token=n.refresh_token,t.path("/canvas")}).error(function(n,t){console.log(n),console.log(t)})}}])}},{}],12:[function(n,t,e){t.exports=function(t){n("./AuthenticationController.js")(t)}},{"./AuthenticationController.js":11}],13:[function(n,t,e){t.exports=function(n){n.factory("AuthenticationService",function(){var n={isAuthenticated:!1,isAdmin:!1};return n}),n.factory("TokenInterceptor",["$q","$window","$location","API","AuthenticationService",function(n,t,e,o,r){return{request:function(n){return n.headers=n.headers||{},t.sessionStorage.token&&(n.headers.Authorization="Bearer "+t.sessionStorage.access_token),n.headers["x-key"]=o.key,n},requestError:function(t){return n.reject(t)},response:function(e){return null!=e&&200==e.status&&t.sessionStorage.token&&!r.isAuthenticated&&(r.isAuthenticated=!0),e||n.when(e)},responseError:function(o){return null!=o&&401===o.status&&(t.sessionStorage.token||r.isAuthenticated)&&(delete t.sessionStorage.token,r.isAuthenticated=!1,e.path("/login")),n.reject(o)}}}])}},{}],14:[function(n,t,e){t.exports=function(t){n("./Authentication.js")(t)}},{"./Authentication.js":13}],15:[function(n,t,e){t.exports=function(t){var e=angular.module("app.authentication",["app.api"]);return n("./Controllers/_index.js")(e),n("./Services/_index.js")(e),e}},{"./Controllers/_index.js":12,"./Services/_index.js":14}],16:[function(n,t,e){t.exports=function(n){n.controller("CanvasController",["$scope","$css",function(n,t){t.bind({href:"test.css"},n),n.test=function(){console.log("test")}}])}},{}],17:[function(n,t,e){t.exports=function(t){n("./CanvasController.js")(t)}},{"./CanvasController.js":16}],18:[function(n,t,e){t.exports=function(t){var e=angular.module("app.canvas",["app.api"]);return n("./Controllers/_index.js")(e),e}},{"./Controllers/_index.js":17}],19:[function(n,t,e){t.exports=function(n){n.controller("ModeratorController",["$scope","$location","$window","ModeratorFactory",function(n,t,e,o){n.groups=o.groups,n.addGroup=function(n){return o.addGroup(n)}}])}},{}],20:[function(n,t,e){t.exports=function(t){n("./ModeratorController.js")(t)}},{"./ModeratorController.js":19}],21:[function(n,t,e){t.exports=function(n){n.factory("ModeratorFactory",function(){var n={};return n.groups=[{name:"test1"},{name:"test2"}],n.addGroup=function(t){n.groups.push({name:t})},n})}},{}],22:[function(n,t,e){t.exports=function(t){n("./ModeratorFactory.js")(t)}},{"./ModeratorFactory.js":21}],23:[function(n,t,e){t.exports=function(t){var e=angular.module("app.moderator",["app.api"]);return n("./Controllers/_index.js")(e),n("./Services/_index.js")(e),e}},{"./Controllers/_index.js":20,"./Services/_index.js":22}]},{},[10]);